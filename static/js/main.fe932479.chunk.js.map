{"version":3,"sources":["components/AppProvider.js","components/ApiCapture.js","components/Authentication.js","components/TimeField.js","components/DayGroup.js","components/Timecard.js","components/AppRouter.js","components/App.js","reportWebVitals.js","index.js"],"names":["AppContext","createContext","initialState","auth","empName","refetch","punches","fields","user","reducer","state","action","type","payload","AppProvider","children","props","useReducer","dispatch","Provider","value","useApp","useContext","ApiCapture","useState","showInput","setShowInput","className","Input","onChange","e","localStorage","target","href","onClick","Authentication","password","setPassword","Date","now","Card","Form","Field","placeholder","onBlur","Button","animated","primary","preventDefault","Airtable","apiKey","base","select","maxRecords","view","filterByFormula","eachPage","records","err","console","error","Content","visible","hidden","Icon","name","TimeField","inOut","makeDisabled","setMakeDisabled","secondary","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","timestamp","create","Username","alert","log","maximumAge","timeout","enableHighAccuracy","bind","disabled","DayGroup","inOutNext","Timecard","apiCallDone","setApiCallDone","useEffect","sort","field","direction","fetchNextPage","split","map","p","ind","AppRouter","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fe932479.chunk.js","sourcesContent":["import React, { createContext, useContext, useReducer } from 'react'\r\n\r\nexport const AppContext = createContext()\r\n\r\nconst initialState = {\r\n  auth: false,\r\n  empName: null,\r\n  refetch: 0,\r\n  punches: [{ fields: {} }],\r\n  user: null\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'SET_USER':\r\n      return { ...state, user: action.payload }\r\n    case 'SET_NAME':\r\n      return { ...state, empName: action.payload }\r\n    case 'SET_AUTH':\r\n      return { ...state, auth: action.payload }\r\n    case 'SET_PUNCHES':\r\n      return { ...state, punches: action.payload }\r\n    case 'UPDATE_REFETCH':\r\n      return { ...state, refetch: ++state.refetch }\r\n    default:\r\n      return { ...state }\r\n  }\r\n}\r\n\r\nconst AppProvider = ({ children, ...props }) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState)\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        ...state,\r\n        dispatch,\r\n        ...props\r\n      }}\r\n    >\r\n      {children}\r\n    </AppContext.Provider>\r\n  )\r\n}\r\n\r\nexport default AppProvider\r\n\r\nexport const useApp = () => useContext(AppContext)\r\n","import React, { useState } from 'react'\r\nimport { Input } from 'semantic-ui-react'\r\n\r\nconst ApiCapture = () => {\r\n  const [showInput, setShowInput] = useState(false)\r\n\r\n  const handleClick = () => {\r\n    setShowInput(true)\r\n  }\r\n\r\n  const handleInputChange = e => {\r\n    localStorage['api_key'] = e.target.value\r\n    setShowInput(false)\r\n  }\r\n\r\n  return (\r\n    <div className='api_key_container'>\r\n      {!showInput ? (\r\n        <a href='#' onClick={handleClick}>\r\n          Set API Key\r\n        </a>\r\n      ) : (\r\n        <Input type='text' onChange={handleInputChange}></Input>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\nexport default ApiCapture\r\n","import React, { useState } from 'react'\r\nimport { Card, Form, Input, Button, Icon } from 'semantic-ui-react'\r\nimport ApiCapture from './ApiCapture'\r\nimport { useApp } from './AppProvider'\r\nimport Airtable from 'airtable'\r\n\r\nfunction Authentication () {\r\n  const [password, setPassword] = useState('')\r\n\r\n  const { user, dispatch } = useApp()\r\n\r\n  if (localStorage['auth_until'] && +localStorage['auth_until'] <= Date.now()) {\r\n    delete localStorage['user']\r\n  }\r\n\r\n  if (!user && localStorage['user']) {\r\n    dispatch({ type: 'SET_USER', payload: localStorage['user'] })\r\n  }\r\n\r\n  if (\r\n    localStorage['auth_until'] &&\r\n    +localStorage['auth_until'] > Date.now() &&\r\n    user\r\n  ) {\r\n    dispatch({ type: 'SET_AUTH', payload: true })\r\n    return <>Loading</>\r\n  }\r\n\r\n  const authenticate = e => {\r\n    e.preventDefault()\r\n\r\n    var base = new Airtable({ apiKey: localStorage['api_key'] }).base(\r\n      'app7hR5UDZ4st97XS'\r\n    )\r\n\r\n    base('Employees')\r\n      .select({\r\n        // Selecting the first 3 records in Grid view:\r\n        maxRecords: 1,\r\n        view: 'Grid view',\r\n        fields: ['Emp Username', 'Emp Password', 'Emp Name'],\r\n        filterByFormula: `{Emp Username}='${user}'`\r\n      })\r\n      .eachPage(\r\n        function page (records) {\r\n          if (\r\n            records[0]?.fields?.['Emp Password'] &&\r\n            records[0]?.fields?.['Emp Username']\r\n          ) {\r\n            if (records[0].fields['Emp Password'] === password) {\r\n              dispatch({ type: 'SET_AUTH', payload: true })\r\n              dispatch({\r\n                type: 'SET_NAME',\r\n                payload: records[0].fields['Emp Name']\r\n              })\r\n              localStorage['auth_until'] = Date.now() + 1000 * 60 * 60 //authenticated for one hour\r\n              localStorage['user'] = user\r\n            }\r\n          }\r\n        },\r\n        function done (err) {\r\n          if (err) {\r\n            console.error(err)\r\n            return\r\n          }\r\n        }\r\n      )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Card className='Authentication'>\r\n        <Form>\r\n          <Form.Field>\r\n            <label>Username</label>\r\n            <Input\r\n              placeholder='Username'\r\n              onBlur={e =>\r\n                dispatch({ type: 'SET_USER', payload: e.target.value })\r\n              }\r\n            />\r\n          </Form.Field>\r\n          <Form.Field>\r\n            <label>Password</label>\r\n            <Input\r\n              type='password'\r\n              placeholder='Password'\r\n              onChange={e => setPassword(e.target.value)}\r\n            />\r\n          </Form.Field>\r\n          <Button animated primary onClick={authenticate}>\r\n            <Button.Content visible>Submit</Button.Content>\r\n            <Button.Content hidden>\r\n              <Icon name='arrow right' />\r\n            </Button.Content>\r\n          </Button>\r\n        </Form>\r\n      </Card>\r\n      <ApiCapture />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Authentication\r\n","import React, { useState } from 'react'\r\nimport { Button } from 'semantic-ui-react'\r\nimport Airtable from 'airtable'\r\nimport { useApp } from './AppProvider'\r\n\r\nconst TimeField = ({ inOut }) => {\r\n  const { user, dispatch } = useApp()\r\n  const [makeDisabled, setMakeDisabled] = useState(false)\r\n\r\n  const uCS = () => {\r\n    setMakeDisabled(true)\r\n\r\n    navigator.geolocation.getCurrentPosition(\r\n      position => {\r\n        const {\r\n          coords: { latitude, longitude },\r\n          timestamp\r\n        } = position\r\n\r\n        const base = new Airtable({ apiKey: localStorage['api_key'] }).base(\r\n          'app7hR5UDZ4st97XS'\r\n        )\r\n\r\n        base('Punch Times').create(\r\n          [\r\n            {\r\n              fields: {\r\n                Username: user,\r\n                'Punch Time': timestamp,\r\n                'Punch Latitude': latitude,\r\n                'Punch Longitude': longitude,\r\n                'Punch Type': inOut\r\n              }\r\n            }\r\n          ],\r\n          err => {\r\n            if (err) return alert(err)\r\n            dispatch({ type: 'UPDATE_REFETCH', payload: true })\r\n            setMakeDisabled(false)\r\n          }\r\n        )\r\n      },\r\n      err => {\r\n        console.log(err)\r\n        alert('Please \"Allow\" location services for this site.')\r\n      },\r\n      { maximumAge: 10000, timeout: 5000, enableHighAccuracy: true }\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        primary={inOut === 'In'}\r\n        secondary={inOut === 'Out'}\r\n        onClick={uCS.bind(this, inOut)}\r\n        disabled={makeDisabled}\r\n      >\r\n        Clock {inOut}\r\n      </Button>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default TimeField\r\n","import React from 'react'\r\n\r\nimport TimeField from './TimeField'\r\nimport '../styles/DayGroup.css'\r\n\r\nfunction DayGroup ({ inOutNext }) {\r\n  return (\r\n    <div className='DayGroup'>\r\n      <TimeField inOut={inOutNext} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DayGroup\r\n","import React, { useEffect, useState } from 'react'\r\nimport Airtable from 'airtable'\r\nimport { useApp } from './AppProvider'\r\nimport DayGroup from './DayGroup'\r\n\r\nimport '../styles/TimeCard.css'\r\n\r\nfunction Timecard () {\r\n  const [apiCallDone, setApiCallDone] = useState(false)\r\n  const { empName, punches, refetch, user, dispatch } = useApp()\r\n\r\n  useEffect(() => {\r\n    const base = new Airtable({ apiKey: localStorage['api_key'] }).base(\r\n      'app7hR5UDZ4st97XS'\r\n    )\r\n\r\n    base('Punch Times')\r\n      .select({\r\n        maxRecords: 20,\r\n        view: 'Grid view',\r\n        sort: [{ field: 'ID', direction: 'desc' }],\r\n        filterByFormula: `AND(Username = \"${user}\")`\r\n      })\r\n      .eachPage(\r\n        function page (records, fetchNextPage) {\r\n          setApiCallDone(true)\r\n\r\n          dispatch({ type: 'SET_PUNCHES', payload: records })\r\n\r\n          fetchNextPage()\r\n        },\r\n        function done (err) {\r\n          if (err) {\r\n            console.error(err)\r\n            return\r\n          }\r\n        }\r\n      )\r\n  }, [refetch, user, dispatch])\r\n\r\n  return (\r\n    <div className='TimeCard'>\r\n      <h2>Hello, {empName?.split(' ')[0]}</h2>\r\n      {apiCallDone ? (\r\n        <DayGroup\r\n          inOutNext={punches[0]?.fields['Punch Type'] === 'In' ? 'Out' : 'In'}\r\n        />\r\n      ) : (\r\n        'Loading...'\r\n      )}\r\n      <br />\r\n      {punches?.map((p, ind) => (\r\n        <div\r\n          key={ind}\r\n        >{`${p.fields['Punch Time']} (${p.fields['Punch Type']})`}</div>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Timecard\r\n","import React from 'react'\r\nimport { useApp } from './AppProvider'\r\nimport Authentication from './Authentication'\r\nimport Timecard from './Timecard'\r\n\r\nconst AppRouter = () => {\r\n  const { auth } = useApp()\r\n\r\n  return <>{!auth ? <Authentication /> : <Timecard />}</>\r\n}\r\n\r\nexport default AppRouter\r\n","import React from 'react'\r\nimport 'semantic-ui-css/semantic.min.css'\r\nimport AppProvider from './AppProvider'\r\nimport AppRouter from './AppRouter'\r\nimport '../styles/Authentication.css'\r\n\r\nfunction App () {\r\n  return (\r\n    <AppProvider>\r\n      <AppRouter />\r\n    </AppProvider>\r\n  )\r\n}\r\n\r\nexport default App\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './components/App'\r\nimport reportWebVitals from './reportWebVitals'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n"],"sourceRoot":""}